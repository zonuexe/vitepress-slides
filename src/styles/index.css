@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Hiragino Sans", "Yu Gothic", sans-serif;
  color-scheme: dark;
}

@layer utilities {
  /* Container */
  .container {
    @apply max-w-7xl mx-auto;
  }

  /* Search Toolbar */
  .search-toolbar {
    @apply flex flex-wrap gap-3 items-center my-5;
  }

  .search-label {
    @apply flex-1 min-w-[280px] max-w-[600px];
  }

  .search-input {
    @apply flex-1 min-w-[280px] w-full px-3.5 py-2.5 border border-gray-300 rounded-full text-base;
    @apply transition-all duration-200;
    @apply focus:outline-none focus:border-blue-500 focus:shadow-[0_0_0_3px_rgba(0,123,255,0.15)];
  }

  .search-result {
    @apply text-sm text-gray-500 m-0;
  }

  /* Slide Grid */
  .slide-grid {
    @apply grid gap-5;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }

  .slide-grid.two-columns {
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  }

  /* Slide Card */
  .slide-card {
    @apply border border-gray-300 p-5 rounded-lg bg-white shadow-sm;
  }

  .slide-card h3 {
    @apply mt-0 mb-0;
  }

  .slide-card-meta {
    @apply text-sm text-gray-500 m-0 mb-2;
  }

  .slide-card-snippet {
    @apply mt-3 text-[0.95rem] text-gray-700 leading-relaxed;
  }

  .slide-card-snippet mark {
    @apply bg-[rgba(255,230,0,0.6)] px-0.5 rounded;
  }

  .slide-link {
    @apply text-blue-600 no-underline;
  }

  .slide-link:hover {
    @apply underline;
  }

  /* Visually Hidden */
  .visually-hidden {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Slide Card Events */
  .slide-card-events {
    @apply mt-2.5 flex flex-col gap-1.5 text-[0.95rem] text-gray-800;
  }

  .slide-card-event {
    @apply flex items-center gap-2 m-0;
  }

  .slide-card-event i {
    @apply text-[#ff5722] inline-block w-[19px];
  }

  /* Slide Card Tags */
  .slide-card-tags {
    @apply mt-3 mb-0 p-0 list-none flex flex-wrap gap-2;
  }

  .slide-card-tags li {
    @apply flex items-center gap-1.5 bg-blue-50 rounded-full px-2.5 py-1 text-sm text-slate-700;
  }

  .slide-card-tags li i {
    @apply text-slate-700 inline-block w-[18px] text-center;
  }

  /* No Results */
  .no-results {
    @apply col-span-full text-center py-10 text-gray-600 text-base;
  }
}
:root {
  color-scheme: light;
  --page-bg: radial-gradient(circle at 20% 20%, #f9fbff, #f2f4fa);
  --page-text: #172031;
  --panel-bg: rgba(255, 255, 255, 0.92);
  --panel-border: rgba(15, 23, 42, 0.08);
  --panel-shadow: 0 25px 45px rgba(15, 23, 42, 0.08);
  --card-bg: #fff;
  --card-border: rgba(15, 23, 42, 0.08);
  --card-shadow: 0 25px 45px rgba(15, 23, 42, 0.08);
  --accent-blue: #2c49ff;
  --accent-green: #2bb673;
  --accent-purple: #7c4dff;
  --muted-text: #5c6275;
  --tag-bg: rgba(44, 73, 255, 0.08);
  --tag-text: #2c3e50;
  --section-bg: rgba(255, 255, 255, 0.95);
  --content-pane-bg: #fff;
  --content-pane-border: rgba(15, 23, 42, 0.08);
  --page-content-bg: rgba(15, 23, 42, 0.03);
  --link-color: #2c49ff;
  --back-btn-bg: #172031;
  --back-btn-color: #fff;
  --event-bg: rgba(44, 73, 255, 0.06);
  --event-border: #2c49ff;
  --pdf-frame-bg: #0f172a;
  --pdf-page-bg: #fff;
  --toast-bg: rgba(23, 32, 49, 0.9);
  --toast-success: rgba(43, 182, 115, 0.9);
  --toast-error: rgba(239, 68, 68, 0.9);
}

html.dark {
  color-scheme: dark;
  --page-bg: radial-gradient(circle at 15% 15%, #101833, #01030f);
  --page-text: #f8fafc;
  --panel-bg: rgba(15, 23, 42, 0.92);
  --panel-border: rgba(248, 250, 252, 0.12);
  --panel-shadow: 0 25px 55px rgba(3, 7, 18, 0.75);
  --card-bg: #0f172a;
  --card-border: rgba(248, 250, 252, 0.12);
  --card-shadow: 0 25px 55px rgba(3, 7, 18, 0.75);
  --muted-text: #cbd5f5;
  --tag-bg: rgba(148, 163, 184, 0.18);
  --tag-text: #e2e8f0;
  --section-bg: rgba(9, 13, 30, 0.92);
  --content-pane-bg: rgba(5, 8, 18, 0.9);
  --content-pane-border: rgba(148, 163, 184, 0.25);
  --page-content-bg: rgba(148, 163, 184, 0.08);
  --link-color: #90a4ff;
  --back-btn-bg: #f1f5ff;
  --back-btn-color: #0f172a;
  --event-bg: rgba(96, 165, 250, 0.22);
  --event-border: rgba(144, 164, 255, 0.9);
  --pdf-frame-bg: #020617;
  --pdf-page-bg: #0b1120;
  --toast-bg: rgba(15, 23, 42, 0.95);
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  min-height: 100vh;
  background: var(--page-bg);
  color: var(--page-text);
}

.slide-detail-page {
  padding: calc(var(--vp-nav-height, 64px) + 24px) 0 56px;
}

.container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 24px;
}

#pdf-container {
  width: 100%;
  margin: 0 auto 32px;
  background: var(--pdf-frame-bg);
  border-radius: 24px;
  overflow: hidden;
  box-shadow: var(--card-shadow);

  iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: var(--pdf-page-bg);
  }
}

.pdf-controls {
  position: fixed;
  top: calc(var(--vp-nav-height, 64px) + 20px);
  right: 32px;
  z-index: 1000;
  display: flex;
  gap: 10px;

  .fullscreen-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 46px;
    height: 46px;
    border-radius: 50%;
    border: none;
    background: var(--accent-blue);
    color: #fff;
    box-shadow: 0 10px 25px rgba(44, 73, 255, 0.35);
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease;

    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 30px rgba(44, 73, 255, 0.45);
    }
  }
}

.slide-info {
  position: relative;
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  border-radius: 20px;
  padding: 32px;
  box-shadow: var(--panel-shadow);
  margin-bottom: 32px;

  .slide-title {
    margin: 0 0 12px;
    font-size: 2.2rem;

    a {
      color: inherit;
      text-decoration: none;
    }
  }

  .published-line,
  .byline {
    margin: 0;
    color: var(--muted-text);
    font-size: 0.95rem;
  }
}

.share-btn,
.fullscreen-info-btn {
  position: absolute;
  top: 24px;
  width: 48px;
  height: 48px;
  border-radius: 14px;
  border: none;
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  cursor: pointer;
}

.share-btn {
  right: 80px;
  background: var(--accent-green);
  box-shadow: 0 12px 25px rgba(43, 182, 115, 0.35);
}

.fullscreen-info-btn {
  right: 24px;
  background: var(--accent-blue);
  box-shadow: 0 12px 25px rgba(44, 73, 255, 0.35);
}

.event-info {
  margin: 24px 0;
  padding: 18px 24px;
  background: var(--event-bg);
  border-radius: 16px;
  border-left: 4px solid var(--event-border);
}

.related-articles {
  margin-bottom: 16px;

  ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  li {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.95rem;
    color: var(--page-text);

    img {
      flex-shrink: 0;
    }

    a {
      color: var(--link-color);
      text-decoration: none;
    }
  }
}

.hashtags {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;

  .hashtag {
    display: inline-flex;
    align-items: center;
    padding: 6px 14px;
    border-radius: 999px;
    background: var(--tag-bg);
    color: var(--tag-text);
    text-decoration: none;
    font-size: 0.9rem;
  }
}

.download-section {
  border-top: 1px solid var(--panel-border);
  margin-top: 24px;
  padding-top: 20px;
  display: flex;
  flex-wrap: wrap;
  gap: 12px;

  .download-btn,
  .download-image-btn,
  .copy-image-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 22px;
    border-radius: 12px;
    border: none;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    text-decoration: none;
    color: #fff;
    box-shadow: 0 12px 20px rgba(23, 32, 49, 0.15);
  }

  .download-btn {
    background: var(--accent-blue);
  }

  .download-image-btn {
    background: var(--accent-green);
  }

  .copy-image-btn {
    background: var(--accent-purple);
  }
}

.slide-content {
  margin-top: 32px;
  border-radius: 20px;
  border: 1px solid var(--content-pane-border);
  background: var(--section-bg);
  padding: 28px;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);

  .content-panes {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
  }

  .text-pane,
  .links-pane {
    background: var(--content-pane-bg);
    border: 1px solid var(--content-pane-border);
    border-radius: 16px;
    padding: 20px;
    box-shadow: var(--card-shadow);
    color: var(--page-text);

    h3 {
      margin: 0 0 8px;
    }
  }

  .page-content {
    padding: 16px;
    border-radius: 12px;
    background: var(--page-content-bg);
    margin-bottom: 12px;
  }

  .page-links {
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    a {
      color: var(--link-color);
      text-decoration: none;
    }
  }
}

.slide-text-nodes {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  font-size: 0.95rem;
  color: var(--page-text);
}

.slide-text-paragraph {
  margin: 0;
  line-height: 1.65;
}

.slide-text-strong {
  font-weight: 600;
}

.slide-text-link {
  color: var(--link-color);
  text-decoration: underline;
  text-underline-offset: 2px;

  &:hover {
    text-decoration-style: wavy;
  }
}

.slide-text-list {
  margin: 0.25rem 0 0.25rem 1.25rem;
  padding: 0;
  list-style: disc;
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.slide-text-list-item {
  margin: 0;
  line-height: 1.5;
}

.slide-text-image-label {
  font-size: 0.85rem;
  color: var(--muted-text);
}

.back-link {
  text-align: right;
  margin-top: 24px;

  .back-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    border-radius: 12px;
    text-decoration: none;
    background: var(--back-btn-bg);
    color: var(--back-btn-color);
    font-weight: 600;
  }
}

.toast {
  position: fixed;
  top: calc(var(--vp-nav-height, 64px) + 12px);
  left: 50%;
  transform: translateX(-50%);
  background: var(--toast-bg);
  color: white;
  padding: 12px 24px;
  border-radius: 999px;
  font-size: 14px;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease;

  &.show {
    opacity: 1;
    visibility: visible;
  }

  &.success {
    background: var(--toast-success);
  }

  &.error {
    background: var(--toast-error);
  }
}

.slide-not-found {
  border-radius: 24px;
  border: 1px solid var(--panel-border);
  padding: 48px;
  text-align: center;
  background: var(--panel-bg);
  box-shadow: var(--panel-shadow);
  color: var(--page-text);

  p {
    margin: 0;
    font-size: 1.1rem;
  }

  .back-link {
    text-align: center;
    margin-top: 24px;
  }
}

.site-footer {
  margin-top: 32px;
  text-align: center;
  color: var(--muted-text);

  a {
    color: var(--link-color);
    text-decoration: none;
  }
}


@media (max-width: 768px) {
  .container {
    padding: 0 16px;
  }

  .slide-info,
  .slide-content {
    padding: 20px;
  }

  #pdf-container {
    margin-top: 12px;
  }

  .download-section {
    flex-direction: column;
  }

  .pdf-controls {
    right: 16px;
  }
}
